var e=require("@barba/core"),t=require("@babel/runtime/helpers/createClass"),n=require("@babel/runtime/helpers/classCallCheck"),r=require("@babel/runtime/helpers/toConsumableArray"),a=require("@babel/runtime/helpers/slicedToArray"),i=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0});var o=p;exports.default=o;var u=i(a),s=i(r),c=i(n),l=i(t),f=i(e);function p(){f.default.hooks.afterEnter((function(e){var t=e.next;return new h(t)})),f.default.init({preventRunning:!0,prevent:function(e){var t=e.event,n=e.href;if("click"===t.type&&n===location.href)return t.preventDefault(),t.stopPropagation(),0!==scrollY&&scroll({top:0,left:0,behavior:"smooth"}),!0},transitions:[{once:function(){},beforeLeave:function(){},beforeEnter:function(){}}]})}addEventListener("DOMContentLoaded",p);var h=function(){function e(t){(0,c.default)(this,e),this.nextDocument=t.container,this.executablesDOM=t.container.querySelector('meta[name="functionsExecution"]'),this.executables=this.executablesDOM.content,this.namespaces=(0,s.default)(new Set(this.executables.split(",").map((function(e){return e.split(".")[0]})))),this.analyze()}return(0,l.default)(e,[{key:"analyze",value:function(){var e=this;this.namespaces.forEach((function(t){window[t]?e.execute(t):e.load(t)}))}},{key:"load",value:function(e){var t=document.createElement("script");t.src="/scripts/".concat(e,"/index.js"),t.defer=!0,t.setAttribute("onload",this.prepareExecution(e)),document.head.append(t),this.executablesDOM.remove()}},{key:"prepareExecution",value:function(e){return this.executables.split(",").map((function(t){if(t.startsWith(e))return"window.".concat(t,"()")})).toString()+';this.removeAttribute("onload")'}},{key:"execute",value:function(e){this.executables.split(",").forEach((function(t){var n=t.split("."),r=(0,u.default)(n,2),a=r[0],i=r[1];a===e&&window[e][i]()}))}}]),e}();