</main>
<footer>

  <script>
    // ios pwa installation instructions
    const btnAdd = document.createElement('button')
    btnAdd.textContent = 'Install'
    btnAdd.style.display = 'none'
    document.body.append(btnAdd)

    let deferredPrompt
    window.addEventListener('beforeinstallprompt', e => {
      e.preventDefault()
      deferredPrompt = e
      btnAdd.style.display = 'block'
    })

    btnAdd.addEventListener('click', e => {
      deferredPrompt.prompt()
      deferredPrompt.userChoice.then(choiceResult => {
        deferredPrompt = null
      })
    })

    window.addEventListener('appinstalled', evt => {
      app.logEvent('a2hs', 'installed')
    })
  </script>

  <% if (typeof _endpoints_ !=='undefined' && _endpoints_.length) { const endpoints=_endpoints_.forEach(([namespace,
    target])=> { %>
    <script src="<%= `/scripts/${namespace}.js` %>" onload="<%= namespace %>.<%= target %>()" type="module"
      defer></script>
    <% })} %>
</footer>
</body>

</html>